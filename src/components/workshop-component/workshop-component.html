

<div class="container">

  <div class="title-style">
    <img src="image/logo.png" alt="logo" class="logo" />
    <h1 class="text-center">Tu taller de confianza, siempre a punto.</h1>
  </div>
  

  <!--Filtros de vehiculos y prioridades-->
  <div class="d-flex align-items-end gap-3 my-3">

    <div class="flex-grow-1 my-2">
      <label class="p-2 fw-bold">Filtro por prioridad:</label>
      <select class="form-select shadow-sm" [(ngModel)]="filterPriority">
        <option value="None">Todas las prioridades</option>
        <option class="text-danger fw-bold" value="high">High</option>
        <option class="text-warning fw-bold" value="medium">Medium</option>
        <option class="text-info fw-bold" value="low">Low</option>
      </select>
    </div>

    <div class=" flex-grow-1 my-2">
      <label class="p-2 fw-bold">Filtro por vehículo:</label>
      <select class="form-select shadow-sm" [(ngModel)]="filterVehicle">
        <option value="None">Todos los vehículos</option>
        <option class="fw-bold" value="Coche">Coche</option>
        <option class="fw-bold" value="Moto">Moto</option>
        <option class="fw-bold" value="Camion">Camion</option>
      </select>
    </div>

  </div>

  <!--La tabla con las reparaciones-->
  <div class="card shadow-sm mb-4">
    <div class="table-responsive">
      <table class="table table-striped table-dark align-middle mb-0 border-0">
        <thead class="table-dark text-warning">
          <tr>
            <th class="ps-3">ID</th>
            <th>Cliente</th>
            <th>Vehículo</th>
            <th>Reparación</th>
            <th>Prioridad</th>
            <th class="text-end">Precio base</th>
            <th class="text-end pe-3">Precio total</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let order of orders  | filterPriority:filterPriority | filterVehicle:filterVehicle ">

            <td class="ps-3 fw-bold">#{{order.id}}</td>
            <td>
              <span [ngClass]="order.client === 'Marcos Peña' ? 'text-success fw-bold' : 'text-white'">
                {{ order.client }}
              </span>
            </td>
            <td>
              <span class="fw-bold">{{ order.vehicle }}</span>
            </td>
            <td>{{ order.typeRepair }}</td>
            <td>
              <i class="bi fs-4"
                 [ngClass]="{
                              'bi-emoji-angry-fill text-danger': order.priority === 'high',
                              'bi-emoji-neutral-fill text-warning': order.priority === 'medium',
                              'bi-emoji-dizzy-fill text-info': order.priority === 'low'
                               }">
              </i>

              <span class="badge text-uppercase" [ngClass]="{'text-danger fw-bold': order.priority === 'high',
                                              ' text-warning fw-bold ': order.priority === 'medium',
                                              ' text-info fw-bold': order.priority === 'low'}">
                {{ order.priority }}
              </span>
            </td>
            <td class="text-end">{{ order.basePrice | currency:'EUR' }}</td>
            <td class="text-end pe-3 fw-bold"
                [appFinalPrice]="order.basePrice"
                [priority]="[order.priority]"
                [client]="order.client"
                #d="finalPrice">
              {{d.totalFinalPrice | currency:'EUR'}}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!--Recargos y descuentos para algunos pedidos segun algunas condiones-->

  <div class="extras-style">
    <div class=" shadow-sm p-4 ">
      <h4 class=" mb-4 border-bottom pb-2">Condiciones extras</h4>
      <div class="row g-3 align-items-center">

        <div class="col-md-5">
          <h4>Tipos de recargo:</h4>

          <ul class="list-unstyled">
            <li class="fw-bold text-info ">30% sobre el precio base con urgencia moderada (prioridad High)</li>
            <li class="fw-bold text-warning ">50% sobre el precio base con urgencia media (prioridad High)</li>
            <li class="fw-bold text-danger ">70% sobre el precio base con urgencia alta (prioridad High)</li>
          </ul>
          <div class="input-group input-group-sm">


            <select [(ngModel)]="pricingService.emergencyFee"
                    class="form-select  fw-bold border-0 shadow-lg "
                    style="cursor: pointer;">
              <option value="0">Tipo de urgencia</option>
              <option value="30" class="text-info fw-bold">{{0.3 | percent}}</option>
              <option value="50" class="text-warning fw-bold">{{0.5 | percent}}</option>
              <option value="70" class="text-danger fw-bold">{{0.7 | percent}}</option>

            </select>

            <span class="input-group-text">%</span>
          </div>
        </div>

        <div class="col-md-5 ">
          <h4>Tipos de descuento:</h4>
          <ul class="list-unstyled">
            <li class="fw-bold text-success ">20% de descuento sobre el precio base.</li>
            <li class="fw-bold text-success ">Para pedidos mayores de 200€ y clientes Premium.</li>
          </ul>
          <br />
          <div class="input-group input-group-sm">


            <select [(ngModel)]="pricingService.loyaltyDiscount"
                    class="form-select  fw-bold border-0 shadow-lg text-success"
                    style="cursor: pointer;">
              <option value="0">Tipo de descuento</option>
              <option value="20" class="fw-bold text-success">{{0.2 | percent}}</option>
            </select>
            <span class="input-group-text">%</span>

          </div>

        </div>

      </div>
    </div>
  </div>

  <div class="footer-style">
    <p>© 2026 TurboPoint · Mecánica y mantenimiento integral</p>
  </div>


</div>



